{"ast":null,"code":"const S3 = require('aws-sdk/clients/s3');\n\nconst multer = require('multer');\n\nconst upload = multer().single('soundBlob');\nconst s3 = new S3({\n  apiVersion: '2006-03-01'\n});\nexport default async function handler(req, res) {\n  if (req.method === 'POST') {\n    upload(req, res, err => {\n      if (err instanceof multer.MulterError) {\n        console.log('instanceof multer', err);\n      } else if (err) {\n        console.log('err', err);\n      } // await s3.upload(\n      //   {\n      //     Bucket: process.env.AWS_BUCKET,\n      //     Key: req.file.originalname,\n      //     Body: Buffer.from(new Uint8Array(req.file.buffer)),\n      //   },\n      //   async (err, data) => {\n      //     if (err) {\n      //       console.log('error: ', err);\n      //       res.sendStatus(404);\n      //     }\n      //     res.send(\n      //       `https://${process.env.AWS_BUCKET}/${escape(req.file.originalname)}`\n      //     );\n      //   }\n      // );\n\n\n      console.log('req.file', req.file);\n    });\n  }\n}","map":{"version":3,"sources":["/Users/mfjvacas/Documents/Dev/GitHub/projects/mapstereo-client/pages/api/upload.ts"],"names":["S3","require","multer","upload","single","s3","apiVersion","handler","req","res","method","err","MulterError","console","log","file"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,oBAAD,CAAlB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAME,MAAM,GAAGD,MAAM,GAAGE,MAAT,CAAgB,WAAhB,CAAf;AAEA,MAAMC,EAAE,GAAG,IAAIL,EAAJ,CAAO;AAAEM,EAAAA,UAAU,EAAE;AAAd,CAAP,CAAX;AAGA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzBP,IAAAA,MAAM,CAACK,GAAD,EAAMC,GAAN,EAAYE,GAAD,IAAS;AACxB,UAAIA,GAAG,YAAYT,MAAM,CAACU,WAA1B,EAAuC;AACrCC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCH,GAAjC;AAED,OAHD,MAGO,IAAIA,GAAJ,EAAS;AACdE,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBH,GAAnB;AAED,OAPuB,CASxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAEAE,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBN,GAAG,CAACO,IAA5B;AACD,KA5BK,CAAN;AA6BD;AACF","sourcesContent":["const S3 = require('aws-sdk/clients/s3');\nconst multer = require('multer');\nconst upload = multer().single('soundBlob');\n\nconst s3 = new S3({ apiVersion: '2006-03-01' });\n\n\nexport default async function handler(req, res) {\n  if (req.method === 'POST') {\n    upload(req, res, (err) => {\n      if (err instanceof multer.MulterError) {\n        console.log('instanceof multer', err);\n        \n      } else if (err) {\n        console.log('err', err);\n        \n      }\n\n      // await s3.upload(\n      //   {\n      //     Bucket: process.env.AWS_BUCKET,\n      //     Key: req.file.originalname,\n      //     Body: Buffer.from(new Uint8Array(req.file.buffer)),\n      //   },\n      //   async (err, data) => {\n      //     if (err) {\n      //       console.log('error: ', err);\n      //       res.sendStatus(404);\n      //     }\n    \n      //     res.send(\n      //       `https://${process.env.AWS_BUCKET}/${escape(req.file.originalname)}`\n      //     );\n      //   }\n      // );\n\n      console.log('req.file', req.file);\n    })\n  }\n}"]},"metadata":{},"sourceType":"module"}